<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIM_L3_C2 - CALE Sat√©lite C2</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6; color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 0; margin: 0; display: flex; min-height: 100vh;
        }
        .sidebar-wrapper {
            width: 280px; background: linear-gradient(135deg, #f5f5f5 0%, #ffffff 100%);
            color: #000; overflow-y: auto; border-right: 2px solid #ccc; padding: 1.5rem 0;
        }
        .sidebar-wrapper::-webkit-scrollbar { width: 8px; }
        .sidebar-wrapper::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
        .sidebar-wrapper::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.2); border-radius: 4px; }
        .sidebar-wrapper::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.3); }
        .main-wrapper {
            flex: 1; display: flex; flex-direction: column; padding: 2rem 1rem; overflow-y: auto;
        }
        .container {
            max-width: 1200px; margin: 0 auto; background: white;
            border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            overflow: hidden; width: 100%;
        }
        .sidebar-header { padding: 0 1.5rem 1.5rem 1.5rem; border-bottom: 2px solid #ddd; margin-bottom: 1rem; }
        .sidebar-header h3 { font-size: 0.9rem; color: #666; margin: 0 0 0.5rem 0; text-transform: uppercase; letter-spacing: 1px; }
        .sidebar-header .titulo-actual { font-size: 1rem; font-weight: 600; color: #000; margin: 0; word-wrap: break-word; }
        .jerarquia-item { margin-bottom: 0.3rem; border-radius: 6px; overflow: hidden; }
        .jerarquia-header { display: flex; align-items: center; padding: 0.7rem 1.5rem; cursor: pointer; transition: all 0.3s; user-select: none; font-size: 0.85rem; background: #e8e8e8; }
        .jerarquia-header:hover { background: #d8d8d8; }
        .jerarquia-toggle { margin-right: 0.5rem; display: inline-block; transition: transform 0.3s; font-size: 0.8rem; }
        .jerarquia-toggle.expanded { transform: rotate(90deg); }
        .jerarquia-title { flex: 1; font-weight: 500; color: #000; }
        .jerarquia-count { font-size: 0.7rem; background: #ddd; padding: 0.2rem 0.5rem; border-radius: 3px; color: #555; }
        .jerarquia-body { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; background: #f0f0f0; }
        .jerarquia-body.expanded { max-height: 1000px; }
        .specs-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid #2c5282; }
        .specs-title { font-size: 1.8rem; color: #2c5282; font-weight: 600; }
        .specs-back-btn { background: #2c5282; color: white; border: none; padding: 0.7rem 1.5rem; border-radius: 6px; cursor: pointer; font-size: 1rem; transition: background 0.3s; }
        .specs-back-btn:hover { background: #4299e1; }
        .specs-info { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
        .specs-card { background: #f8f9fa; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #2c5282; }
        .specs-card h3 { color: #666; font-size: 0.9rem; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.5px; }
        .specs-card p { color: #333; font-size: 1.1rem; font-weight: 500; }
        .specs-children { margin-top: 2rem; }
        .specs-children h3 { color: #2c5282; font-size: 1.2rem; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 2px solid #2c5282; }
        .specs-item { background: white; padding: 1rem; margin-bottom: 0.5rem; border-radius: 6px; border-left: 3px solid #4299e1; cursor: pointer; transition: all 0.2s; }
        .specs-item:hover { background: #f0f4f0; border-left-color: #2c5282; }
        .jerarquia-item-level { padding: 0.5rem 1.5rem 0.5rem 2.2rem; font-size: 0.8rem; color: #333; border-left: 2px solid #ccc; cursor: pointer; transition: all 0.2s; }
        .jerarquia-item-level:hover { color: #000; border-left-color: #999; background: #e8e8e8; }
        @media (max-width: 768px) { body { flex-direction: column; } .sidebar-wrapper { width: 100%; border-right: none; border-bottom: 2px solid #1a365d; max-height: 200px; } .main-wrapper { padding: 1.5rem 1rem; } }
        .header {
            background: linear-gradient(135deg, #036085 0%, #0e74b4 100%);
            color: #e7e7e7; padding: 2.5rem 2rem;
        }
        .bim-id {
            display: inline-block; background:#036085 0%;
            padding: 0.5rem 1rem; border-radius: 6px;
            font-size: 0.9rem; font-weight: 600; margin-bottom: 0.5rem;
        }
        h1 { font-size: 2rem; margin-bottom: 0.5rem; }
        .subtitle { font-size: 1.1rem; opacity: 0.95; font-weight: 300; }
        .content { padding: 2.5rem; }
        .info-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem; margin-bottom: 2.5rem;
        }
        .info-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 1.5rem; border-radius: 8px; border-left: 4px solid #333;
        }
        .info-card.destacada {
            background: linear-gradient(135deg, #e8e8e8 0%, #d8d8d8 100%);
            border-left: 4px solid #666;
        }
        .info-card h3 {
            font-size: 0.9rem; color: #666; margin-bottom: 0.5rem;
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        .info-card p { font-size: 1.3rem; font-weight: 600; color: #333; margin: 0.3rem 0; }
        .info-card.destacada p { font-size: 1.8rem; color: #000; }
        section { margin-bottom: 2.5rem; }
        h2 {
            color: #333; font-size: 1.5rem; margin-bottom: 1rem;
            padding-bottom: 0.5rem; border-bottom: 2px solid #333;
        }
        table { width: 100%; border-collapse: collapse; background: white; }
        thead { background: linear-gradient(135deg, #4a4a4a 0%, #5a5a5a 100%); color: white; }
        th, td { padding: 1rem; text-align: left; border-bottom: 1px solid #dee2e6; }
        th { font-weight: 600; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px; }
        tbody tr:hover { background-color: #f8f9fa; }
        .text-right { text-align: right; }
        .text-center { text-align: center; }
        code {
            background: #f8f9fa; padding: 0.2rem 0.5rem; border-radius: 4px;
            font-family: 'Courier New', monospace; font-size: 0.9em; color: #666;
        }
        footer {
            background: #f8f9fa; padding: 1.5rem 2.5rem; text-align: center;
            color: #666; font-size: 0.9rem; border-top: 1px solid #dee2e6;
        }
    </style>
</head>
<body>
    <div class="sidebar-wrapper" id="sidebarWrapper"></div>
    <div class="main-wrapper">
        <div class="container">
            <header class="header">
            <div class="header-content">
                <div class="bim-id">BIM_L3_C2</div>
                <h1>CALE Sat√©lite C2 - Sede Principal Municipal</h1>
                <p class="subtitle">Configuraci√≥n para 31 municipios - Infraestructura satelital completa</p>
            </div>
        </header>
        
        <div class="content">
            <div class="info-grid">
                <div class="info-card">
                    <h3>üîñ Identificador BIM</h3>
                    <p><code>BIM_L3_C2</code></p>
                </div>
                
                <div class="info-card">
                    <h3>üìÇ Nivel Jerarqu√≠a</h3>
                    <p>Nivel L3</p>
                </div>
                
                <div class="info-card">
                    <h3>üèóÔ∏è Tipo CALE</h3>
                    <p>Sat√©lite C2</p>
                </div>
                
                <div class="info-card destacada">
                    <h3>üí∞ Valorizaci√≥n Unitaria</h3>
                    <p>$30.000.000 COP</p>
                </div>
                
                <div class="info-card">
                    <h3>üìç Municipios</h3>
                    <p>31 nodos</p>
                </div>
                
                <div class="info-card destacada">
                    <h3>üí∞ Valor Total Nacional</h3>
                    <p>$930.000.000 COP</p>
                </div>
            </div>
            
            <section>
                <h2>üîß Componentes de la Configuraci√≥n</h2>
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Componente</th>
                            <th>Descripci√≥n</th>
                            <th>Referencia BIM</th>
                            <th>Valor Unitario</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td><strong>Infraestructura Civil Base</strong></td>
                            <td>Edificaci√≥n administrativa y servicios</td>
                            <td><code>L2.edificacion_admin</code></td>
                            <td class="text-right"><strong>$250.000.000</strong></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td><strong>Componente Te√≥rico CALE-T</strong></td>
                            <td>Infraestructura te√≥rica ajustada</td>
                            <td><code>L2.cale_teorico</code></td>
                            <td class="text-right"><strong>$180.000.000</strong></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td><strong>Instalaciones Especiales</strong></td>
                            <td>Instalaciones el√©ctricas, hidr√°ulicas, climatizaci√≥n y comunicaciones</td>
                            <td><code>L2.instalaciones_especiales</code></td>
                            <td class="text-right"><strong>$150.000.000</strong></td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td><strong>Obras Exteriores y Cerramiento</strong></td>
                            <td>√Åreas verdes, parqueaderos, cerramiento perimetral y accesos</td>
                            <td><code>L2.obras_exteriores</code></td>
                            <td class="text-right"><strong>$100.000.000</strong></td>
                        </tr>
                    </tbody>
                </table>
            </section>
            
            <section>
                <h2>üìã Informaci√≥n Adicional</h2>
                <p><strong>Prop√≥sito:</strong> Sedes satelitales principales en cabeceras municipales</p>
                <p><strong>Capacidad:</strong> Atenci√≥n y orientaci√≥n a usuarios, coordinaci√≥n local</p>
                <p><strong>Integraci√≥n:</strong> Conexi√≥n con centros CALE metropolitanos</p>
                <p><strong>Estado:</strong> ‚úÖ Ficha creada - Coherente con Anexo B</p>
            </section>
            </div>
            
            <footer>
                <p>Sistema Nacional de Centros de Apoyo Log√≠stico de Evaluaci√≥n - SNCALE | UPTC</p>
                <p style="margin-top: 1rem; font-size: 0.85rem;">BIM_L3_C2 | Sat√©lite C2 | UPTC 2025</p>
            </footer>
        </div>
    </div>
    <script>
        const L2_COMPONENT_MAP = {
            'L2.edificacion_admin': {
                titulo: 'Infraestructura Civil Base',
                descripcion: 'Edificaci√≥n administrativa y servicios',
                l1_items: [
                    { id: 'L1.007', titulo: 'Estructura civil', l0_items: [{titulo:'EDIF_001',especificacion:'Estructura de concreto reforzado'},{titulo:'ACC_001',especificacion:'Acceso principal'},{titulo:'ACC_002',especificacion:'Acceso secundario'},{titulo:'ACC_003',especificacion:'Acceso de emergencia'}] },
                    { id: 'L1.008', titulo: 'Instalaciones sanitarias', l0_items: [{titulo:'HID_001',especificacion:'Red de agua potable'},{titulo:'HID_002',especificacion:'Sistema de alcantarillado'},{titulo:'SEG_001',especificacion:'Sistemas de seguridad contra incendios'},{titulo:'SEG_002',especificacion:'Se√±al√©tica de seguridad'}] }
                ]
            },
            'L2.cale_teorico': {
                titulo: 'Componente Te√≥rico CALE-T',
                descripcion: 'Infraestructura te√≥rica ajustada (descontados C2-C5 satelitales)',
                l1_items: [
                    { id: 'L1.009', titulo: 'Aulas te√≥ricas equipadas', l0_items: [{titulo:'MOB_006',especificacion:'Escritorio tipo pupitres con apoyo'},{titulo:'MOB_007',especificacion:'Sillas ergon√≥micas'},{titulo:'MOB_008',especificacion:'Pizarras interactivas'},{titulo:'TEC_001',especificacion:'Computadora de escritorio'},{titulo:'TEC_002',especificacion:'Sistema de proyecci√≥n'}] },
                    { id: 'L1.010', titulo: 'Sistemas audiovisuales', l0_items: [{titulo:'TEC_003',especificacion:'C√°mara de video profesional'},{titulo:'TEC_004',especificacion:'Sistema de sonido integrado'},{titulo:'MONITOR_VIDEOWALL',especificacion:'Panel de video wall de alta resoluci√≥n'}] }
                ]
            },
            'L2.instalaciones_especiales': {
                titulo: 'Instalaciones Especiales',
                descripcion: 'Instalaciones el√©ctricas, hidr√°ulicas, climatizaci√≥n y comunicaciones',
                l1_items: [
                    { id: 'L1.015', titulo: 'Sistema el√©ctrico integral', l0_items: [{titulo:'ELE_001',especificacion:'Transformador trif√°sico 500kVA'},{titulo:'ELE_002',especificacion:'Panel de distribuci√≥n principal'},{titulo:'ELE_003',especificacion:'Sistema UPS de respaldo'},{titulo:'ELE_004',especificacion:'Generador diesel de emergencia'},{titulo:'ELE_006',especificacion:'Cableado de media tensi√≥n'},{titulo:'ELE_007',especificacion:'Cableado de baja tensi√≥n'},{titulo:'ELE_008',especificacion:'Sistema de puesta a tierra'},{titulo:'ELE_009',especificacion:'Pararrayos y protecci√≥n'}] },
                    { id: 'L1.016', titulo: 'HVAC y comunicaciones', l0_items: [{titulo:'HVAC_001',especificacion:'Sistema de aire acondicionado central'},{titulo:'IC_002',especificacion:'Red de telecomunicaciones'},{titulo:'IC_003',especificacion:'Sistema de fibra √≥ptica'},{titulo:'IC_004',especificacion:'Cableado estructurado Cat-6A'}] }
                ]
            },
            'L2.obras_exteriores': {
                titulo: 'Obras Exteriores y Cerramiento',
                descripcion: '√Åreas verdes, parqueaderos, cerramiento perimetral y accesos',
                l1_items: [
                    { id: 'L1.014', titulo: 'Circulaci√≥n externa', l0_items: [{titulo:'CIRCULACION_EXTERNA',especificacion:'V√≠as perimetrales y accesos'},{titulo:'PASILLO_INTERNO',especificacion:'Pasillos internos entre m√≥dulos'},{titulo:'RAMPA_ACCESIBILIDAD',especificacion:'Rampa de accesibilidad para discapacitados'}] }
                ]
            }
        };

        // Variable global para guardar el contenido original del L3
        let l3OriginalContent = null;

        function parseComponentTable() {
            const table = document.querySelector('table');
            if (!table) return [];
            const rows = Array.from(table.querySelectorAll('tbody tr'));
            const components = [];
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length >= 4) {
                    const componentName = cells[1].textContent.trim();
                    const referenciaBim = cells[3].querySelector('code')?.textContent.trim() || '';
                    const descripcion = cells[2].textContent.trim();
                    if (referenciaBim.startsWith('L2.')) {
                        components.push({ nombre: componentName, referencia: referenciaBim, descripcion: descripcion });
                    }
                }
            });
            return components;
        }
        function buildHierarchy(components) {
            const titulo = document.querySelector('h1')?.textContent || 'Centro CALE';
            const hijos_l2 = [];
            
            // Usar los 4 L2 del CALE Metropolitano con toda su estructura
            components.forEach((comp, idx) => {
                const l2Data = L2_COMPONENT_MAP[comp.referencia];
                if (l2Data) {
                    const hijos_l1 = l2Data.l1_items.map(l1 => {
                        const hijos_l0 = l1.l0_items.map(l0 => ({
                            titulo: l0.titulo,
                            especificacion: l0.especificacion
                        }));
                        return {
                            id: l1.id,
                            titulo: l1.titulo,
                            hijos_l0: hijos_l0
                        };
                    });
                    
                    hijos_l2.push({
                        bim_id: `BIM_L2_${String(idx + 1).padStart(3, '0')}`,
                        titulo: comp.nombre,
                        descripcion: l2Data.descripcion,
                        hijos_l1: hijos_l1
                    });
                }
            });
            
            return { titulo: titulo, hijos_l2: hijos_l2 };
        }
        function renderSidebar() {
            const sidebarWrapper = document.getElementById('sidebarWrapper');
            const components = parseComponentTable();
            const data = buildHierarchy(components);
            if (!data || !data.hijos_l2 || data.hijos_l2.length === 0) {
                sidebarWrapper.innerHTML = '<div class="sidebar-header"><img src="../visualizacion/logo-uptc.svg" alt="UPTC Logo" style="width: 100%; max-width: 200px; margin: 0 auto; display: block;"></div>';
                return;
            }
            window.hierarchyData = data;
            let html = `<div class="sidebar-header"><img src="../visualizacion/logo-uptc.svg" alt="UPTC Logo" style="width: 100%; max-width: 200px; margin: 0 auto; display: block;"></div><div class="jerarquia-item"><div class="jerarquia-header" onclick="toggleLevel(this); return false;"><span class="jerarquia-toggle">‚ñ∂</span><span class="jerarquia-title" onclick="showL3Specs(); return false;" style="cursor: pointer;">${data.titulo}</span><span class="jerarquia-count">${data.hijos_l2.length}</span></div><div class="jerarquia-body" id="body-l3">`;
            data.hijos_l2.forEach((l2, idx) => {
                const hasL1 = l2.hijos_l1 && l2.hijos_l1.length > 0;
                html += `<div class="jerarquia-item" style="margin-left: 1rem;"><div class="jerarquia-header" onclick="toggleLevel(this); return false;" style="background: #e8e8e8;"><span class="jerarquia-toggle ${hasL1 ? '' : 'disabled'}">‚ñ∂</span><span class="jerarquia-title" onclick="showL2Specs(${idx}); return false;">L2 ${l2.titulo}</span>${hasL1 ? `<span class="jerarquia-count">${l2.hijos_l1.length}</span>` : ''}</div><div class="jerarquia-body" id="body-l2-${idx}">`;
                if (hasL1) {
                    l2.hijos_l1.forEach((l1, l1idx) => {
                        const hasL0 = l1.hijos_l0 && l1.hijos_l0.length > 0;
                        html += `<div class="jerarquia-item" style="margin-left: 1rem;"><div class="jerarquia-header" onclick="toggleLevel(this); return false;" style="background: #d8d8d8; font-size: 0.8rem;"><span class="jerarquia-toggle ${hasL0 ? '' : 'disabled'}">‚ñ∂</span><span class="jerarquia-title" onclick="showL1Specs(${idx}, ${l1idx}); return false;">L1 ${l1.titulo}</span>${hasL0 ? `<span class="jerarquia-count">${l1.hijos_l0.length}</span>` : ''}</div><div class="jerarquia-body" id="body-l1-${idx}-${l1idx}">`;
                        if (hasL0) {
                            l1.hijos_l0.forEach((l0, l0idx) => {
                                html += `<div class="jerarquia-item-level" style="margin-left: 0.5rem; padding-left: 2.5rem; font-size: 0.75rem;" onclick="showL0Specs(${idx}, ${l1idx}, ${l0idx}); return false;">üî∏ L0 ${l0.titulo}</div>`;
                            });
                        } else {
                            html += `<div class="jerarquia-item-level" style="color: #999; font-style: italic; font-size: 0.75rem;">Sin L0</div>`;
                        }
                        html += `</div></div>`;
                    });
                } else {
                    html += `<div class="jerarquia-item-level" style="color: #999; font-style: italic;">Sin L1</div>`;
                }
                html += `</div></div>`;
            });
            html += `</div></div>`;
            sidebarWrapper.innerHTML = html;
        }
        function toggleLevel(element) {
            event.stopPropagation();
            const body = element.nextElementSibling;
            if (body && body.classList.contains('jerarquia-body')) {
                body.classList.toggle('expanded');
                const toggle = element.querySelector('.jerarquia-toggle');
                if (toggle && !toggle.classList.contains('disabled')) {
                    toggle.classList.toggle('expanded');
                }
            }
        }
        function showL2Specs(l2idx) {
            event.stopPropagation();
            const l2 = window.hierarchyData.hijos_l2[l2idx];
            const specsView = document.querySelector('.content');
            let html = `<div class="specs-header"><div><span style="color: rgba(44, 82, 130, 0.6); font-size: 0.9rem;">üì¶ L2 COMPONENTE</span><h2 class="specs-title">${l2.titulo}</h2></div></div>`;
            if (l2.hijos_l1 && l2.hijos_l1.length > 0) {
                html += `<div class="specs-children"><h3>Sub-componentes L1 (${l2.hijos_l1.length})</h3>`;
                l2.hijos_l1.forEach((l1, l1idx) => { html += `<div class="specs-item" onclick="showL1Specs(${l2idx}, ${l1idx})">üîó <strong>${l1.titulo}</strong></div>`; });
                html += `</div>`;
            }
            specsView.innerHTML = html;
            document.querySelector('.main-wrapper').scrollTop = 0;
        }
        function showL1Specs(l2idx, l1idx) {
            event.stopPropagation();
            const l2 = window.hierarchyData.hijos_l2[l2idx];
            const l1 = l2.hijos_l1[l1idx];
            const specsView = document.querySelector('.content');
            let html = `<div class="specs-header"><div><span style="color: rgba(44, 82, 130, 0.6); font-size: 0.9rem;">üîó L1 SUB-COMPONENTE</span><h2 class="specs-title">${l1.titulo}</h2></div></div>`;
            if (l1.hijos_l0 && l1.hijos_l0.length > 0) {
                html += `<div class="specs-children"><h3>Elementos L0 (${l1.hijos_l0.length})</h3>`;
                l1.hijos_l0.forEach((l0, l0idx) => { html += `<div class="specs-item" onclick="showL0Specs(${l2idx}, ${l1idx}, ${l0idx})">üî∏ <strong>${l0.titulo}</strong></div>`; });
                html += `</div>`;
            }
            specsView.innerHTML = html;
            document.querySelector('.main-wrapper').scrollTop = 0;
        }
        async function showL0Specs(l2idx, l1idx, l0idx) {
            event.stopPropagation();
            const l0 = window.hierarchyData.hijos_l2[l2idx].hijos_l1[l1idx].hijos_l0[l0idx];
            const specsView = document.querySelector('.content');
            
            specsView.innerHTML = '<div class="specs-content" style="text-align: center; padding: 3rem;"><p>Cargando fich√° de componente L0...</p></div>';
            
            try {
                let content = null;
                let styles = null;
                for (let i = 1; i <= 91; i++) {
                    const fileNum = String(i).padStart(3, '0');
                    const url = `../fichas/BIM_L0_${fileNum}.html`;
                    try {
                        const response = await fetch(url);
                        if (response.ok) {
                            const html = await response.text();
                            if (html.includes('L0.' + l0.titulo) || html.includes('>' + l0.titulo + '<')) {
                                const parser = new DOMParser();
                                const doc = parser.parseFromString(html, 'text/html');
                                const mainContent = doc.querySelector('.main-content');
                                const styleTag = doc.querySelector('style');
                                if (mainContent) {
                                    content = mainContent.innerHTML;
                                    if (styleTag) {
                                        styles = styleTag.textContent;
                                    }
                                    break;
                                }
                            }
                        }
                    } catch (e) {
                    }
                }
                
                if (content) {
                    specsView.innerHTML = `
                        <style>
                            ${styles || ''}
                            .bim-l0-container { margin-left: 0; max-width: 100%; }
                        </style>
                        <div class="bim-l0-container">
                            ${content}
                        </div>
                    `;
                } else {
                    specsView.innerHTML = `
                        <div class="specs-header">
                            <div>
                                <span style="color: rgba(44, 82, 130, 0.6); font-size: 0.9rem;">üî∏ L0 ELEMENTO AT√ìMICO</span>
                                <h2 class="specs-title">${l0.titulo}</h2>
                            </div>
                        </div>
                    `;
                }
            } catch (error) {
                specsView.innerHTML = `
                    <div class="specs-header">
                        <div>
                            <span style="color: rgba(44, 82, 130, 0.6); font-size: 0.9rem;">üî∏ L0 ELEMENTO AT√ìMICO</span>
                            <h2 class="specs-title">${l0.titulo}</h2>
                        </div>
                    </div>
                `;
            }
            
            document.querySelector('.main-wrapper').scrollTop = 0;
        }
        function hideSpecs() {
            location.reload();
        }
        function showL3Specs() {
            event.stopPropagation();
            const specsView = document.querySelector('.content');
            
            if (l3OriginalContent) {
                specsView.innerHTML = l3OriginalContent;
                document.querySelector('.main-wrapper').scrollTop = 0;
            }
        }
        document.addEventListener('DOMContentLoaded', function() {
            // Guardar el contenido original del L3 antes de renderizar el sidebar
            const contentArea = document.querySelector('.content');
            if (contentArea) {
                l3OriginalContent = contentArea.innerHTML;
            }
            renderSidebar();
        });
    </script>
</body>
</html>
